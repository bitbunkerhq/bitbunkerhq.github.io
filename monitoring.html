<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Monitoring en Acción – BitBunker HQ</title>
  <meta name="description" content="Observabilidad de PostgreSQL con Prometheus + Grafana. Baseline, carga y resultados." />

  <!-- Favicons -->
  <link rel="icon" href="assets/favicons/favicon.svg" type="image/svg+xml">
  <link rel="alternate icon" href="assets/favicons/favicon.png" type="image/png">
  <link rel="shortcut icon" href="assets/favicons/favicon.ico" type="image/x-icon">


  <!-- Inter + Tailwind -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Tailwind config (colores del sitio) -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            bunker: {
              50: '#f7f8fb',
              100: '#eef1f7',
              200: '#d9e0ee',
              300: '#b9c6de',
              400: '#7f9ac2',
              500: '#4b6fa8',
              600: '#31558f',
              700: '#294673',
              800: '#233a5c',
              900: '#1b2c44',
              950: '#121d2c',
            },
            accent: '#22d3ee'
          }
        }
      }
    }
  </script>

  <!-- Estilos base del sitio -->
  <style>
    html { scroll-behavior: smooth; }
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .bg-grid {
      background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.08) 1px, transparent 0);
      background-size: 24px 24px;
    }
  </style>
</head>
<body class="min-h-screen bg-bunker-950 bg-grid text-white">

  <!-- Header unificado -->
  <header class="sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-bunker-950/70 bg-bunker-950/60 border-b border-white/10">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="/index.html" class="flex items-center gap-2 group">
        <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-accent/20 text-accent font-black">BB</span>
        <span class="font-semibold tracking-tight group-hover:text-accent transition">BitBunker HQ</span>
      </a>
      <nav class="hidden md:flex items-center gap-6 text-sm text-white/80">
        <a class="hover:text-white" href="/index.html#proyectos">Proyectos</a>
        <a class="hover:text-white" href="/index.html#progreso">Progreso</a>
        <a class="hover:text-white" href="/index.html#sobre-mi">Sobre mí</a>
        <a class="hover:text-white" href="/index.html#contacto">Contacto</a>
        <a class="ml-2 inline-flex items-center gap-2 rounded-lg border border-white/15 px-3 py-1.5 hover:bg-white/5 transition" href="https://www.linkedin.com/in/fedevalenti" target="_blank" rel="noopener">LinkedIn ↗</a>
      </nav>
    </div>
  </header>

  <!-- Botón volver -->
  <nav class="max-w-6xl mx-auto px-4 mt-4">
    <a href="/index.html" class="inline-flex items-center gap-2 rounded-lg border border-white/15 px-3 py-2 text-sm text-white/90 hover:bg-white/5 transition">← Volver al inicio</a>
  </nav>

  <!-- ===== MONITORING OVERVIEW ===== -->
  <section id="monitoring" class="monitoring-section">
    <div class="container">
      <h2>Monitoring en Acción</h2>
      <p class="intro">
        Observabilidad de <strong>PostgreSQL</strong> con <strong>Prometheus + Grafana</strong>.
        Aquí contamos la historia de la <em>última prueba relevante</em> (baseline → carga → resultados),
        y al final listamos todos los casos anteriores.
      </p>

      <!-- 1) ANTES -->
      <div class="monitoring-block">
        <h3>1. Situación inicial</h3>
        <p>
          Entorno estable y de baja actividad para establecer un baseline: conexiones mínimas a la base
          y a la instancia, TPS plano, ausencia de deadlocks. Esto nos da un punto de comparación para los cambios.
        </p>
        <figure>
          <img src="images/2025-08/loadtest-v1/01-before-kpis.png" alt="KPIs iniciales: conexiones, TPS, cache hit">
          <figcaption>Baseline: métricas planas y cache hit &gt; 99%.</figcaption>
        </figure>
        <details>
          <summary>Ver más gráficos de la etapa inicial</summary>
          <figure>
            <img src="images/2025-08/loadtest-v1/06-filas-leidas.png" alt="Actividad de filas (read/change)">
            <figcaption>Flujo constante de filas leídas (Returned) en reposo, sin operaciones de inserción, actualización o borrado. Confirmamos solo lectura durante la línea base.</figcaption>
          </figure>
          <figure>
            <img src="images/2025-08/loadtest-v1/05-conexiones-por-estado.png" alt="Conexiones por estado">
            <figcaption>Durante la línea base no se registraron conexiones activas ni en espera. La base permaneció en reposo antes de iniciar las pruebas.</figcaption>
          </figure>
        </details>
      </div>

      <!-- 2) DURANTE -->
      <div class="monitoring-block">
        <h3>2. Pruebas de carga</h3>
        <p>
          Ejecutamos <strong>pgbench</strong> y consultas BI intensivas para simular concurrencia real.
          Observamos comportamiento bajo presión: latencias, locks, variaciones de TPS y cache hit.
        </p>
        <figure>
          <img src="images/2025-08/loadtest-v1/02-during-tps.png" alt="TPS durante las pruebas">
          <figcaption>
            Durante la prueba de carga simultánea, el servidor PostgreSQL alcanzó 49 conexiones activas y 2 transacciones abiertas de forma concurrente.
            El pico de rendimiento fue de 1.15K transacciones por segundo (TPS), con alto volumen de filas leídas, insertadas y actualizadas en tiempo real.
            Este panel muestra el impacto global de la carga en conexiones, consultas y movimiento de datos.
          </figcaption>
        </figure>
        <details>
          <summary>Ver más gráficos de la prueba</summary>
          <figure>
            <img src="images/2025-08/loadtest-v1/03-peak-health.png" alt="Locks y deadlocks">
            <figcaption>Locks por modo controlados y <strong>0 deadlocks</strong> durante la ejecución: la concurrencia no generó bloqueos críticos.</figcaption>
          </figure>
          <figure>
            <img src="images/2025-08/loadtest-v1/07-resources-during.png" alt="CPU y RAM durante la prueba">
            <figcaption>CPU hasta ~0,75% y RAM ~9,15%: aumento controlado sin llegar a saturar la infraestructura.</figcaption>
          </figure>
        </details>
      </div>

      <!-- 3) DESPUÉS -->
      <div class="monitoring-block">
        <h3>3. Resultados y balance</h3>

        <p>Tras dos pruebas de carga independientes, el sistema demostró su capacidad para absorber picos de concurrencia y actividad sin degradación sostenida.</p>
        <p>El gráfico muestra cómo, al finalizar cada ciclo de carga, las métricas clave —conexiones, TPS, actividad de filas, locks y deadlocks— retornan rápidamente a valores normales.</p>
        <p>Este comportamiento confirma un <strong>baseline estable post-prueba</strong>, validando tanto la configuración de PostgreSQL como la capacidad del entorno para manejar cargas intermitentes sin impacto residual.</p>

        <br>

        <p>La ejecución de las pruebas de carga permitió validar el comportamiento del servidor PostgreSQL bajo un escenario de concurrencia moderada y consultas de alta frecuencia.</p>

        <h4>Estabilidad del sistema:</h4>
        <p>No se detectaron errores críticos ni caídas durante las pruebas. Todos los procesos se ejecutaron y finalizaron de forma ordenada, sin comprometer la disponibilidad.</p>

        <h4>Concurrencia gestionada:</h4>
        <p>PostgreSQL manejó correctamente las 49 conexiones activas simultáneas y las operaciones concurrentes, manteniendo la latencia baja.</p>

        <h4>Rendimiento:</h4>
        <p>Pico de 1.15K TPS, con flujo constante de inserciones, actualizaciones y lecturas sobre grandes volúmenes de filas.</p>

        <h4>Integridad y ausencia de bloqueos graves:</h4>
        <p>Locks dentro de valores esperados, sin deadlocks.</p>

        <h4>Recursos del sistema:</h4>
        <p>CPU y memoria con incremento controlado, confirmando margen para cargas más exigentes.</p>

        <h4>Conclusión:</h4>
        <p>El entorno absorbió picos de actividad sin degradar el servicio: configuración apta para escenarios reales y espacio para escalar en próximos ensayos.</p>

        <figure>
          <img src="images/2025-08/loadtest-v1/08-final-reposo.png" alt="Dashboard tras pruebas de carga">
          <figcaption>Visión global tras las pruebas: recuperación estable y sin impacto residual.</figcaption>
        </figure>
      </div>
    </div>
  </section>

  <!-- Estilos locales de la sección (conservados) -->
  <style>
    .monitoring-section {
    background: transparent;
    color: #e6edf3;
    padding: 60px 20px;
    }

    .monitoring-section .container { max-width:1100px; margin:0 auto; }
    .monitoring-section h2 { font-size:2.2rem; margin-bottom:20px; border-bottom:2px solid rgba(255,255,255,0.1); padding-bottom:10px; }
    .monitoring-section .intro { font-size:1.08rem; color:#b8c5d3; margin-bottom:36px; }
    .monitoring-block { margin-bottom:50px; }
    .monitoring-block h3 { font-size:1.35rem; color:#5ac8fa; margin-bottom:10px; }
    .monitoring-block p { color:#c8d6e5; line-height:1.55; margin-bottom:16px; }
    .monitoring-block figure { margin:0 0 12px 0; }
    .monitoring-block img { width:100%; border-radius:10px; border:1px solid rgba(255,255,255,0.12); box-shadow:0 2px 10px rgba(0,0,0,0.35); }
    .monitoring-block figcaption { font-size:.92rem; color:#a8b9c9; margin-top:6px; }
    details { margin-top:10px; border:1px solid rgba(255,255,255,0.12); border-radius:10px; padding:10px 12px; }
    summary { cursor:pointer; color:#d9e3ee; }
  </style>

  <!-- Footer unificado -->
  <footer class="text-sm text-white/60 border-t border-white/10">
    <div class="max-w-6xl mx-auto px-4 py-8 flex flex-col md:flex-row items-center justify-between gap-2">
      <p>© <span id="year"></span> BitBunker HQ – Fede Valenti</p>
      <p class="opacity-80">Hecho con 💙, PostgreSQL y mucha curiosidad.</p>
    </div>
  </footer>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
